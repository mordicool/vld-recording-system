<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="../images/logo.png"/>
    <title>מערכת העלאת הקלטות</title>
    <link href="../css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="../css/bootstrap-rtl.css" rel="stylesheet" type="text/css"/>
    <link href="../css/style.css" rel="stylesheet" type="text/css"/>
    <link href="../jsTree/dist/themes/default/style.min.css" rel="stylesheet" type="text/css"/>

    <!-- JQuery -->
    <script src="../js/Technologies/jquery.min.js" type="application/javascript"></script>
    <!-- Angular -->
    <script src="../js/Technologies/angular.min.js" type="application/javascript"></script>
    <!-- Bootstrap -->
    <script src="../js/Technologies/bootstrap.min.js" type="application/javascript"></script>
    <!-- My App -->
    <script type="application/javascript">
        var app = angular.module('login',[]);
        app.controller('loginController', ['$scope', '$http', function ($scope, $http) {
            $scope.password = '';
            $scope.isError = false;

            $scope.Login = function () {
                var password = $scope.password;
                if (password == '') return;

                $http.get('/api/login?password=' + password)
                        .then(function (response) {
                            if (response.status == 200) {
                                location.reload();
                            }
                        }, function (response) {
                            if (response.status == 400) {
                                $scope.isError = true;
                            }
                        });
            };
        }]);
    </script>
</head>
<body ng-app="login">
<nav>
    <nav class="navbar navbar-default my-nav">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#my-navbar-collapse"
                        aria-expanded="false">
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">
                    <img alt="Brand" src="../images/logo.png">
                </a>
            </div>
            <div class="collapse navbar-collapse" id="my-navbar-collapse">
                <ul class="nav navbar-nav pull-left">
                </ul>
            </div>
        </div>
    </nav>
</nav>
<main class="container-fluid" style="margin-top: 10em" ng-controller="loginController" ng-cloak="true">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xs-offset-3 col-sm-offset-3 col-md-offset-3 col-lg-offset-3">
            <h1 class="text-center" style="margin-bottom: 1em">כניסה למערכת</h1>
            <div class="input-group col-lg-6 col-lg-offset-3">
                <input type="password" class="form-control" ng-model="password" ng-keyup="$event.keyCode == 13 && Login()">
                <span class="input-group-btn">
                    <button class="btn btn-success" ng-click="Login()"><span class="glyphicon glyphicon-log-in"></span></button>
                </span>
            </div>
            <div class="input-group col-lg-6 col-lg-offset-3" style="margin-top: .5em;">
                <div class="alert alert-danger" ng-show="isError" role="alert">הסיסמא שגואה, אנא הזן סיסמא נכונה</div>
            </div>
        </div>
    </div>
</main>
<footer style="position: absolute; left: 40%; right: 40%; top: 96%">
    <p class="text-center">&copy; כל הזכויות שמורות למרדכי וינברג</p>
</footer>
</body>
</html>
